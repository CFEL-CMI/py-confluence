#!/usr/bin/python3
"""
This script downloads a local, standalone backup of a single space of confluence.
"""
from confluence import static_archive
import argparse

def main():
	"""
	Main function of static_backup script. User is asked some needed information like server address and username.
	"""
	parser = argparse.ArgumentParser(description='This script downloads a local, standalone backup of a single space of confluence.')
	parser.add_argument('--server', dest='server', default="https://confluence.desy.de/",help='Server address with trailing /             [default: https://confluence.desy.de/]')
	parser.add_argument('--user', dest='user', default="jkuepper",help='Please enter your Username. You need access to all pages!         [default: jkuepper]')
	parser.add_argument('--key', dest='sk',required=True,help='Please enter the spacekey of the space you want to copy to your computer')
	parser.add_argument('--save-pages', dest='downloadPages', default="True",help='Set to False if you dont want to save pages.           [default: True]')
	parser.add_argument('--save-blog', dest='downloadBlog', default="True",help='Set to False if you dont want to save the blog.          [default: True]')
	parser.add_argument('--save-attachments', dest='downloadAttach', default="True",help='Set to False if you dont want to save the blog. [default: True]')


	args = parser.parse_args()

	if args.server[-1:] != "/":
		args.server+= "/"
	print("Please enter your password to confirm the following settings:")
	print("Server address  :  " + args.server)
	print("Username        :  " + args.user)
	print("Spacekey        :  " + args.sk)
	print("save Pages      :  " + args.downloadPages)
	print("save Blog       :  " + args.downloadBlog)
	print("save Attachments:  " + args.downloadAttach)


	static_archive.startArchive(args.server,args.user,args.sk,args.downloadPages,args.downloadBlog,args.downloadAttach)

if __name__ == "__main__":
	main()